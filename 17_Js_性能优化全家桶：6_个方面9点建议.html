<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>17 Js 性能优化全家桶：6 个方面9点建议</title>
    <link rel="shortcut icon" href="code-square-o.svg" type="image/x-icon" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Kanit:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.34.1/min/vs/editor/editor.main.css"
    />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="wrapper">
      <div class="wrapper__top">
        <div class="wrapper__top_main">17 Js 性能优化全家桶：6 个方面9点建议</div>
      </div>
      <div class="wrapper__list isshow">
        <div class="wrapper__list_bar">
          <a class="wrapper__top_home" href="/">
            <svg
              t="1723305211896"
              class="icon"
              viewBox="0 0 1024 1024"
              version="1.1"
              xmlns="http://www.w3.org/2000/svg"
              p-id="6246"
              width="200"
              height="200"
            >
              <path
                d="M469.034667 180.778667a74.666667 74.666667 0 0 1 85.930666 0l256 180.138666c19.882667 13.994667 31.701333 36.778667 31.701334 61.098667V768A74.666667 74.666667 0 0 1 768 842.666667h-74.666667V597.333333A138.666667 138.666667 0 0 0 554.666667 458.666667h-85.333334A138.666667 138.666667 0 0 0 330.666667 597.333333v245.333334H256A74.666667 74.666667 0 0 1 181.333333 768V421.973333c0-24.277333 11.818667-47.061333 31.701334-61.013333l256-180.181333zM437.333333 842.666667V597.333333a32 32 0 0 1 32-32h85.333334a32 32 0 0 1 32 32v245.333334h-149.333334z m179.029334-749.098667a181.333333 181.333333 0 0 0-208.725334 0l-256 180.138667A181.333333 181.333333 0 0 0 74.666667 421.973333V768A181.333333 181.333333 0 0 0 256 949.333333h512A181.333333 181.333333 0 0 0 949.333333 768V421.973333a181.333333 181.333333 0 0 0-76.970666-148.266666l-256-180.138667z"
                fill="#ffffff"
                p-id="6247"
              ></path>
            </svg>
          </a>
          
          
        </div>
        <ul><li data-id="59" data-path="readme.md"><svg t="1723729102337" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="22764" width="200" height="200"><path d="M456.32 433.216v227.712h49.792V362.304H456.32v0.512L350.976 468.16 246.144 363.264v-0.896h-49.792v298.624h49.792V433.664l104.96 104.96 35.2-35.2-0.128-0.064L456.32 433.216z m-328.256-294.4h768a64 64 0 0 1 64 64v618.624a64 64 0 0 1-64 64h-768a64 64 0 0 1-64-64V202.752a64 64 0 0 1 64-64z m581.76 427.968V362.304h-49.728v201.792L580.8 484.8l-35.2 35.2 140.8 140.8 35.2-35.2-0.064-0.064 105.6-105.664-35.2-35.2-82.048 82.112z" fill="#61A0FF" p-id="22765"></path></svg>readme.md</li></ul>
      </div>
      <div class="wrapper__content"></div>
    </div>
    <pre id="pre" style="display: none">
{
  &#34;readme.md&#34;: &#34;&lt;h2&gt;🛠️ 内存管理&lt;/h2&gt;\n&lt;p&gt;高效的内存管理是保证 JavaScript 应用程序性能的关键。内存管理不善会导致内存泄漏和程序崩溃。&lt;/p&gt;\n&lt;h3&gt;避免使用全局变量&lt;/h3&gt;\n&lt;p&gt;尽量减少全局变量的使用，以防止内存泄漏，确保更好的封装。&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-js\&#34;&gt;(function () {\n  const localVariable = &amp;quot;I am local&amp;quot;;\n  console.log(localVariable);\n})();\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3&gt;使用 WeakMap 进行缓存&lt;/h3&gt;\n&lt;p&gt;WeakMaps 允许在不阻止垃圾回收的情况下缓存对象。&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-js\&#34;&gt;const cache = new WeakMap();\n\nfunction process(data) {\n  if (!cache.has(data)) {\n    const result = expensiveComputation(data);\n    cache.set(data, result);\n  }\n  return cache.get(data);\n}\n\nfunction expensiveComputation(data) {\n  // Simulate expensive computation\n  return data * 2;\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2&gt;🌐 用于离线缓存的 Service Worker&lt;/h2&gt;\n&lt;p&gt;Service Worker 可以通过缓存资源和启用离线功能来显著提高性能。&lt;/p&gt;\n&lt;h3&gt;实现 Basic Service Worker&lt;/h3&gt;\n&lt;p&gt;设置 Service Worker 来缓存资源。&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-js\&#34;&gt;// sw.js\nself.addEventListener(&amp;quot;install&amp;quot;, (event) =&amp;gt; {\n  event.waitUntil(\n    caches.open(&amp;quot;v1&amp;quot;).then((cache) =&amp;gt; {\n      return cache.addAll([\n        &amp;quot;/index.html&amp;quot;,\n        &amp;quot;/styles.css&amp;quot;,\n        &amp;quot;/script.js&amp;quot;,\n        &amp;quot;/image.png&amp;quot;,\n      ]);\n    })\n  );\n});\n\nself.addEventListener(&amp;quot;fetch&amp;quot;, (event) =&amp;gt; {\n  event.respondWith(\n    caches.match(event.request).then((response) =&amp;gt; {\n      return response || fetch(event.request);\n    })\n  );\n});\n\n// Register the Service Worker\nif (&amp;quot;serviceWorker&amp;quot; in navigator) {\n  navigator.serviceWorker\n    .register(&amp;quot;/sw.js&amp;quot;)\n    .then(() =&amp;gt; console.log(&amp;quot;Service Worker registered&amp;quot;))\n    .catch((error) =&amp;gt;\n      console.error(&amp;quot;Service Worker registration failed&amp;quot;, error)\n    );\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2&gt;📊 用于性能密集型任务的 WebAssembly&lt;/h2&gt;\n&lt;p&gt;WebAssembly（Wasm）使用二进制指令格式来执行高性能代码。&lt;/p&gt;\n&lt;h3&gt;WebAssembly 用于繁重的计算&lt;/h3&gt;\n&lt;p&gt;可以将应用程序的性能关键部分编译为 WebAssembly。&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-js\&#34;&gt;// C code (example.c)\n#include &amp;lt;emscripten.h&amp;gt;\n\nEMSCRIPTEN_KEEPALIVE\nint add(int a, int b) {\n    return a + b;\n}\n\n// Compile to WebAssembly\n// emcc example.c -o example.js -s EXPORTED_FUNCTIONS=&amp;quot;[&amp;#39;_add&amp;#39;]&amp;quot;\n\n// JavaScript\nfetch(&amp;#39;example.wasm&amp;#39;).then(response =&amp;gt;\n    response.arrayBuffer()\n).then(bytes =&amp;gt;\n    WebAssembly.instantiate(bytes, {})\n).then(results =&amp;gt; {\n    const add = results.instance.exports.add;\n    console.log(add(2, 3)); // 5\n});\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2&gt;🎛️ 用于多线程的 Web Worker&lt;/h2&gt;\n&lt;p&gt;Web Workers 允许在后台线程中运行脚本，在 JavaScript 中启用多线程。&lt;/p&gt;\n&lt;h3&gt;将密集型任务转移给 Web Worker&lt;/h3&gt;\n&lt;p&gt;将繁重的计算交托到 Web Worker，保证能够及时响应主线程，太妙了。&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-js\&#34;&gt;// worker.js\nself.onmessage = (event) =&amp;gt; {\n  const result = performHeavyComputation(event.data);\n  self.postMessage(result);\n};\n\nfunction performHeavyComputation(data) {\n  // Simulate heavy computation\n  return data.split(&amp;quot;&amp;quot;).reverse().join(&amp;quot;&amp;quot;);\n}\n\n// main.js\nconst worker = new Worker(&amp;quot;worker.js&amp;quot;);\n\nworker.postMessage(&amp;quot;Hello, Web Worker!&amp;quot;);\n\nworker.onmessage = (event) =&amp;gt; {\n  console.log(&amp;quot;Result from Worker:&amp;quot;, event.data);\n};\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2&gt;🚀 优化 React 应用程序&lt;/h2&gt;\n&lt;p&gt;React 以其强大的功能而著称，但在处理大型应用时可能会成为性能瓶颈。为了提供无缝的用户体验，对 React 性能的优化变得尤为关键。&lt;/p&gt;\n&lt;h3&gt;使用 React.memo 和 useMemo&lt;/h3&gt;\n&lt;p&gt;React.memo 可以防止对函数组件进行不必要的重新渲染。&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-jsx\&#34;&gt;const ExpensiveComponent = React.memo(({ data }) =&amp;gt; {\n  // Expensive operations here\n  return &amp;lt;div&amp;gt;{data}&amp;lt;/div&amp;gt;;\n});\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;对于开销大的计算，那就得交给 useMemo 了。&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-jsx\&#34;&gt;const MyComponent = ({ items }) =&amp;gt; {\n  const total = useMemo(() =&amp;gt; {\n    return items.reduce((sum, item) =&amp;gt; sum + item.value, 0);\n  }, [items]);\n  return &amp;lt;div&amp;gt;Total: {total}&amp;lt;/div&amp;gt;;\n};\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3&gt;使用 React.lazy 和 Suspense 进行代码拆分&lt;/h3&gt;\n&lt;p&gt;非常建议大家拆分代码，然后在需要时再去加载组件。&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-jsx\&#34;&gt;const LazyComponent = React.lazy(() =&amp;gt; import(&amp;quot;./LazyComponent&amp;quot;));\nconst MyComponent = () =&amp;gt; (\n  &amp;lt;React.Suspense fallback={&amp;lt;div&amp;gt;Loading...&amp;lt;/div&amp;gt;}&amp;gt;\n    &amp;lt;LazyComponent /&amp;gt;\n  &amp;lt;/React.Suspense&amp;gt;\n);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2&gt;⚙️ 使用高效的数据结构&lt;/h2&gt;\n&lt;p&gt;选择合适的数据结构会对性能产生重大影响。&lt;/p&gt;\n&lt;h3&gt;使用 map 快速查找键值&lt;/h3&gt;\n&lt;p&gt;与对象相比，map 对于频繁的添加和查找更友好。&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-js\&#34;&gt;const map = new Map();\nmap.set(&amp;quot;key1&amp;quot;, &amp;quot;value1&amp;quot;);\nconsole.log(map.get(&amp;quot;key1&amp;quot;)); // value1\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3&gt;使用 set 快速存储唯一值&lt;/h3&gt;\n&lt;p&gt;set 提供了一种存储唯一值的高性能方式。Nice。&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-js\&#34;&gt;const set = new Set([1, 2, 3, 4, 4]);\nconsole.log(set.has(4)); // true\nconsole.log(set.size); // 4\n&lt;/code&gt;&lt;/pre&gt;\n&#34;
}</pre
    >
    <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.34.1/min/vs/loader.js"></script>
    <script src="script.js"></script>
  </body>
</html>
