<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>19 通过二进制格式检测上传文件类型</title>
    <link rel="shortcut icon" href="code-square-o.svg" type="image/x-icon" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Kanit:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.34.1/min/vs/editor/editor.main.css"
    />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="wrapper">
      <div class="wrapper__top">
        <div class="wrapper__top_main">19 通过二进制格式检测上传文件类型</div>
      </div>
      <div class="wrapper__list isshow">
        <div class="wrapper__list_bar">
          <a class="wrapper__top_home" href="/">
            <svg
              t="1723305211896"
              class="icon"
              viewBox="0 0 1024 1024"
              version="1.1"
              xmlns="http://www.w3.org/2000/svg"
              p-id="6246"
              width="200"
              height="200"
            >
              <path
                d="M469.034667 180.778667a74.666667 74.666667 0 0 1 85.930666 0l256 180.138666c19.882667 13.994667 31.701333 36.778667 31.701334 61.098667V768A74.666667 74.666667 0 0 1 768 842.666667h-74.666667V597.333333A138.666667 138.666667 0 0 0 554.666667 458.666667h-85.333334A138.666667 138.666667 0 0 0 330.666667 597.333333v245.333334H256A74.666667 74.666667 0 0 1 181.333333 768V421.973333c0-24.277333 11.818667-47.061333 31.701334-61.013333l256-180.181333zM437.333333 842.666667V597.333333a32 32 0 0 1 32-32h85.333334a32 32 0 0 1 32 32v245.333334h-149.333334z m179.029334-749.098667a181.333333 181.333333 0 0 0-208.725334 0l-256 180.138667A181.333333 181.333333 0 0 0 74.666667 421.973333V768A181.333333 181.333333 0 0 0 256 949.333333h512A181.333333 181.333333 0 0 0 949.333333 768V421.973333a181.333333 181.333333 0 0 0-76.970666-148.266666l-256-180.138667z"
                fill="#ffffff"
                p-id="6247"
              ></path>
            </svg>
          </a>
          
          <button class="wrapper__top_ex">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              fill="none"
              viewBox="0 0 24 24"
              class="icon-xl-heavy"
            >
              <path
                fill="currentColor"
                fill-rule="evenodd"
                d="M8.857 3h6.286c1.084 0 1.958 0 2.666.058.729.06 1.369.185 1.961.487a5 5 0 0 1 2.185 2.185c.302.592.428 1.233.487 1.961.058.708.058 1.582.058 2.666v3.286c0 1.084 0 1.958-.058 2.666-.06.729-.185 1.369-.487 1.961a5 5 0 0 1-2.185 2.185c-.592.302-1.232.428-1.961.487C17.1 21 16.227 21 15.143 21H8.857c-1.084 0-1.958 0-2.666-.058-.728-.06-1.369-.185-1.96-.487a5 5 0 0 1-2.186-2.185c-.302-.592-.428-1.232-.487-1.961C1.5 15.6 1.5 14.727 1.5 13.643v-3.286c0-1.084 0-1.958.058-2.666.06-.728.185-1.369.487-1.96A5 5 0 0 1 4.23 3.544c.592-.302 1.233-.428 1.961-.487C6.9 3 7.773 3 8.857 3M6.354 5.051c-.605.05-.953.142-1.216.276a3 3 0 0 0-1.311 1.311c-.134.263-.226.611-.276 1.216-.05.617-.051 1.41-.051 2.546v3.2c0 1.137 0 1.929.051 2.546.05.605.142.953.276 1.216a3 3 0 0 0 1.311 1.311c.263.134.611.226 1.216.276.617.05 1.41.051 2.546.051h.6V5h-.6c-1.137 0-1.929 0-2.546.051M11.5 5v14h3.6c1.137 0 1.929 0 2.546-.051.605-.05.953-.142 1.216-.276a3 3 0 0 0 1.311-1.311c.134-.263.226-.611.276-1.216.05-.617.051-1.41.051-2.546v-3.2c0-1.137 0-1.929-.051-2.546-.05-.605-.142-.953-.276-1.216a3 3 0 0 0-1.311-1.311c-.263-.134-.611-.226-1.216-.276C17.029 5.001 16.236 5 15.1 5zM5 8.5a1 1 0 0 1 1-1h1a1 1 0 1 1 0 2H6a1 1 0 0 1-1-1M5 12a1 1 0 0 1 1-1h1a1 1 0 1 1 0 2H6a1 1 0 0 1-1-1"
                clip-rule="evenodd"
              ></path>
            </svg>
          </button>
          
          
          <a class="wrapper__top_preview" href="/codes/19 通过二进制格式检测上传文件类型" target="_blank">
            <svg
              t="1723292839956"
              class="icon"
              viewBox="0 0 1316 1024"
              version="1.1"
              xmlns="http://www.w3.org/2000/svg"
              p-id="4260"
              width="200"
              height="200"
            >
              <path
                d="M658.285714 0C415.890286 0 0 297.106286 0 512c0 214.820571 415.890286 512 658.285714 512 242.322286 0 658.285714-294.838857 658.285715-512 0-217.161143-415.963429-512-658.285715-512z m0 877.714286c-161.572571 0-512-221.769143-512-365.714286 0-144.018286 350.427429-365.714286 512-365.714286 161.572571 0 512 217.161143 512 365.714286s-350.427429 365.714286-512 365.714286z"
                fill="#ffffff"
                p-id="4261"
              ></path>
              <path
                d="M658.285714 292.571429a219.428571 219.428571 0 1 0 0 438.857142 219.428571 219.428571 0 0 0 0-438.857142z m0 292.571428a73.142857 73.142857 0 1 1 0-146.285714 73.142857 73.142857 0 0 1 0 146.285714z"
                fill="#ffffff"
                p-id="4262"
              ></path>
            </svg>
          </a>
          
        </div>
        <ul><li data-id="63" data-path="index.html"><svg t="1723728069970" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2156" width="200" height="200"><path d="M89.088 59.392l62.464 803.84c1.024 12.288 9.216 22.528 20.48 25.6L502.784 993.28c6.144 2.048 12.288 2.048 18.432 0l330.752-104.448c11.264-4.096 19.456-14.336 20.48-25.6l62.464-803.84c1.024-17.408-12.288-31.744-29.696-31.744H118.784c-17.408 0-31.744 14.336-29.696 31.744z" fill="#FC490B" p-id="2157"></path><path d="M774.144 309.248h-409.6l12.288 113.664h388.096l-25.6 325.632-227.328 71.68-227.328-71.68-13.312-169.984h118.784v82.944l124.928 33.792 123.904-33.792 10.24-132.096H267.264L241.664 204.8h540.672z" fill="#FFFFFF" p-id="2158"></path></svg>index.html</li><li data-id="64" data-path="script.js"><svg fill="none" height="2500" width="2183" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 124 141.53199999999998"><path d="M10.383 126.894L0 0l124 .255-10.979 126.639-50.553 14.638z" fill="#e9ca32"/><path d="M62.468 129.277V12.085l51.064.17-9.106 104.851z" fill="#ffde25"/><g fill="#fff"><path d="M57 26H43.5v78L33 102V91.5l-12.5-2V113l36.5 9.5zM67.127 26H104.5L102 40.95H81.394v24.533H102L99.5 115l-32.373 7.5V107L89 99.5 90.263 79l-23.136 3.35z"/></g></svg>script.js</li><li data-id="65" data-path="style.css"><svg t="1723728108552" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2302" width="200" height="200"><path d="M512 512zM128.3 64.3l69.8 805.8 313.4 89.5L825.8 870l69.9-805.7H128.3z m580.9 669.3l-197.1 56.2-196.8-56.5L301.9 578h96.4l6.9 79.1 107.1 30.3 0.3 0.5h0.1l106.9-29.7L630.7 530H406.1l-8-99.9h241.1l8.8-101.9H280.2l-8-97.9H753l-43.8 503.3z" fill="#264DE4" p-id="2303"></path></svg>style.css</li></ul>
      </div>
      <div class="wrapper__content"></div>
    </div>
    <pre id="pre" style="display: none">
{
  &#34;index.html&#34;: &#34;&lt;!DOCTYPE html&gt;\r\n&lt;html lang=\&#34;en\&#34;&gt;\r\n  &lt;head&gt;\r\n    &lt;meta charset=\&#34;UTF-8\&#34; /&gt;\r\n    &lt;meta name=\&#34;viewport\&#34; content=\&#34;width=device-width, initial-scale=1.0\&#34; /&gt;\r\n    &lt;title&gt;Document&lt;/title&gt;\r\n    &lt;link\r\n      rel=\&#34;stylesheet\&#34;\r\n      href=\&#34;/codes/19 通过二进制格式检测上传文件类型/style.css\&#34;\r\n    /&gt;\r\n  &lt;/head&gt;\r\n  &lt;body&gt;\r\n    &lt;label class=\&#34;upload-label\&#34;&gt;\r\n      &lt;input type=\&#34;file\&#34; id=\&#34;upload\&#34; /&gt;\r\n      &lt;button type=\&#34;button\&#34; id=\&#34;upload_btn\&#34;&gt;上传文件获取类型&lt;/button&gt;\r\n    &lt;/label&gt;\r\n    &lt;script src=\&#34;/codes/19 通过二进制格式检测上传文件类型/script.js\&#34;&gt;&lt;/script&gt;\r\n  &lt;/body&gt;\r\n&lt;/html&gt;\r\n&#34;,
  &#34;script.js&#34;: &#34;/**\r\n * @description MIME Type与Byte signature映射表\r\n * @reference https://mimesniff.spec.whatwg.org/#matching-an-image-type-signature\r\n */\r\nconst signatureList = [\r\n  {\r\n    mime: \&#34;video/mp4\&#34;,\r\n    ext: \&#34;mp4\&#34;,\r\n    offset: 4,\r\n    signature: [0x66, 0x74, 0x79, 0x70, 0x69, 0x73, 0x6f, 0x6d],\r\n  },\r\n  {\r\n    mime: \&#34;video/mp4\&#34;,\r\n    ext: \&#34;mp4\&#34;,\r\n    offset: 4,\r\n    signature: [0x66, 0x74, 0x79, 0x70, 0x6d, 0x70, 0x34],\r\n  },\r\n  {\r\n    mime: \&#34;image/jpeg\&#34;,\r\n    ext: \&#34;jpeg\&#34;,\r\n    signature: [0xff, 0xd8, 0xff],\r\n  },\r\n  {\r\n    mime: \&#34;image/png\&#34;,\r\n    ext: \&#34;png\&#34;,\r\n    signature: [0x89, 0x50, 0x4e, 0x47, 0x0d, 0x0a, 0x1a, 0x0a],\r\n  },\r\n  {\r\n    mime: \&#34;image/gif\&#34;,\r\n    ext: \&#34;gif\&#34;,\r\n    signature: [0x47, 0x49, 0x46, 0x38, 0x37, 0x61],\r\n  },\r\n  {\r\n    mime: \&#34;image/gif\&#34;,\r\n    ext: \&#34;gif\&#34;,\r\n    signature: [0x47, 0x49, 0x46, 0x38, 0x39, 0x61],\r\n  },\r\n  {\r\n    mime: \&#34;image/vnd.adobe.photoshop\&#34;,\r\n    ext: \&#34;psd\&#34;,\r\n    signature: [0x38, 0x42, 0x50, 0x53],\r\n  },\r\n  {\r\n    mime: \&#34;image/webp\&#34;,\r\n    ext: \&#34;webp\&#34;,\r\n    signature: [\r\n      0x52,\r\n      0x49,\r\n      0x46,\r\n      0x46,\r\n      undefined,\r\n      undefined,\r\n      undefined,\r\n      undefined,\r\n      0x57,\r\n      0x45,\r\n      0x42,\r\n      0x50,\r\n      0x56,\r\n      0x50,\r\n    ],\r\n  },\r\n  {\r\n    mime: \&#34;image/x-icon\&#34;,\r\n    ext: \&#34;ico\&#34;,\r\n    signature: [0x00, 0x00, 0x01, 0x00],\r\n  },\r\n  {\r\n    mime: \&#34;image/x-icon\&#34;,\r\n    ext: \&#34;cur\&#34;,\r\n    signature: [0x00, 0x00, 0x02, 0x00],\r\n  },\r\n  {\r\n    ext: \&#34;tif\&#34;,\r\n    mime: \&#34;image/tiff\&#34;,\r\n    signature: [0x4d, 0x4d, 0x0, 0x2a],\r\n  },\r\n  {\r\n    ext: \&#34;tif\&#34;,\r\n    mime: \&#34;image/tiff\&#34;,\r\n    signature: [0x49, 0x49, 0x2a, 0x00],\r\n  },\r\n  {\r\n    ext: \&#34;bpg\&#34;,\r\n    mime: \&#34;image/bpg\&#34;,\r\n    signature: [0x42, 0x50, 0x47, 0xfb],\r\n  },\r\n  {\r\n    mime: \&#34;application/pdf\&#34;,\r\n    ext: \&#34;pdf\&#34;,\r\n    signature: [0x25, 0x50, 0x44, 0x46, 0x2d],\r\n  },\r\n  {\r\n    mime: \&#34;application/ogg\&#34;,\r\n    ext: \&#34;ogg\&#34;,\r\n    signature: [0x4f, 0x67, 0x67, 0x53],\r\n  },\r\n  {\r\n    mime: \&#34;audio/midi\&#34;,\r\n    ext: \&#34;midi\&#34;,\r\n    signature: [0x4d, 0x54, 0x68, 0x64],\r\n  },\r\n  {\r\n    mime: \&#34;audio/mpeg\&#34;,\r\n    ext: \&#34;mp3\&#34;,\r\n    signature: [0x49, 0x44, 0x33],\r\n  },\r\n  {\r\n    ext: \&#34;flac\&#34;,\r\n    mime: \&#34;audio/x-flac\&#34;,\r\n    signature: [0x66, 0x4c, 0x61, 0x43],\r\n  },\r\n  {\r\n    ext: \&#34;mpg\&#34;,\r\n    mime: \&#34;video/mpeg\&#34;,\r\n    signature: [0x0, 0x0, 0x1, 0xba],\r\n  },\r\n  {\r\n    ext: \&#34;mpg\&#34;,\r\n    mime: \&#34;video/mpeg\&#34;,\r\n    signature: [0x0, 0x0, 0x1, 0xb3],\r\n  },\r\n  {\r\n    mime: \&#34;video/x-flv\&#34;,\r\n    ext: \&#34;flv\&#34;,\r\n    signature: [0x46, 0x4c, 0x56],\r\n  },\r\n  {\r\n    mime: \&#34;image/bmp\&#34;,\r\n    ext: \&#34;bmp\&#34;,\r\n    signature: [0x42, 0x4d],\r\n  },\r\n  {\r\n    mime: \&#34;audio/aiff\&#34;,\r\n    ext: \&#34;aiff\&#34;,\r\n    signature: [\r\n      0x46,\r\n      0x4f,\r\n      0x52,\r\n      0x4d,\r\n      undefined,\r\n      undefined,\r\n      undefined,\r\n      undefined,\r\n      0x41,\r\n      0x49,\r\n      0x46,\r\n      0x46,\r\n    ],\r\n  },\r\n  {\r\n    mime: \&#34;video/vnd.avi\&#34;,\r\n    ext: \&#34;avi\&#34;,\r\n    signature: [\r\n      0x52,\r\n      0x49,\r\n      0x46,\r\n      0x46,\r\n      undefined,\r\n      undefined,\r\n      undefined,\r\n      undefined,\r\n      0x41,\r\n      0x56,\r\n      0x49,\r\n      0x20,\r\n    ],\r\n  },\r\n\r\n  {\r\n    mime: \&#34;video/webm\&#34;,\r\n    ext: \&#34;webm\&#34;,\r\n    signature: [0x1a, 0x45, 0xdf, 0xa3],\r\n  },\r\n  {\r\n    mime: \&#34;audio/mpeg\&#34;,\r\n    ext: \&#34;mp3\&#34;,\r\n    signature: [0xff, 0xfb],\r\n  },\r\n  {\r\n    mime: \&#34;audio/mpeg\&#34;,\r\n    ext: \&#34;mp3\&#34;,\r\n    signature: [0xff, 0xf3],\r\n  },\r\n  {\r\n    mime: \&#34;audio/mpeg\&#34;,\r\n    ext: \&#34;mp3\&#34;,\r\n    signature: [0xff, 0xf2],\r\n  },\r\n  {\r\n    mime: \&#34;audio/mpeg\&#34;,\r\n    ext: \&#34;mp3\&#34;,\r\n    signature: [0xff, 0xfb],\r\n  },\r\n  {\r\n    mime: \&#34;audio/vnd.wave\&#34;,\r\n    ext: \&#34;wav\&#34;,\r\n    signature: [\r\n      0x52,\r\n      0x49,\r\n      0x46,\r\n      0x46,\r\n      undefined,\r\n      undefined,\r\n      undefined,\r\n      undefined,\r\n      0x57,\r\n      0x41,\r\n      0x56,\r\n      0x45,\r\n    ],\r\n  },\r\n  {\r\n    mime: \&#34;audio/qcelp\&#34;,\r\n    ext: \&#34;qcp\&#34;,\r\n    signature: [\r\n      0x52,\r\n      0x49,\r\n      0x46,\r\n      0x46,\r\n      undefined,\r\n      undefined,\r\n      undefined,\r\n      undefined,\r\n      0x51,\r\n      0x4c,\r\n      0x43,\r\n      0x4d,\r\n    ],\r\n  },\r\n  {\r\n    mime: \&#34;font/ttf\&#34;,\r\n    ext: \&#34;ttf\&#34;,\r\n    signature: [0x00, 0x01, 0x00, 0x00],\r\n  },\r\n  {\r\n    mime: \&#34;font/otf\&#34;,\r\n    ext: \&#34;otf\&#34;,\r\n    signature: [0x4f, 0x54, 0x54, 0x4f],\r\n  },\r\n  {\r\n    mime: \&#34;font/collection\&#34;,\r\n    ext: \&#34;ttcf\&#34;,\r\n    signature: [0x74, 0x74, 0x63, 0x66],\r\n  },\r\n  {\r\n    mime: \&#34;font/woff\&#34;,\r\n    ext: \&#34;woff\&#34;,\r\n    signature: [0x77, 0x4f, 0x46, 0x46],\r\n  },\r\n  {\r\n    mime: \&#34;font/woff2\&#34;,\r\n    ext: \&#34;woff2\&#34;,\r\n    signature: [0x77, 0x4f, 0x46, 0x32],\r\n  },\r\n  {\r\n    mime: \&#34;application/x-rar-compressed\&#34;,\r\n    ext: \&#34;rar\&#34;,\r\n    signature: [0x52, 0x61, 0x72, 0x20, 0x1a, 0x07, 0x00],\r\n  },\r\n  {\r\n    mime: \&#34;application/x-msdownload\&#34;,\r\n    ext: \&#34;exe\&#34;,\r\n    signature: [0x4d, 0x5a],\r\n  },\r\n  {\r\n    ext: \&#34;xz\&#34;,\r\n    mime: \&#34;application/x-xz\&#34;,\r\n    signature: [0xfd, 0x37, 0x7a, 0x58, 0x5a, 0x00],\r\n  },\r\n  {\r\n    ext: \&#34;7z\&#34;,\r\n    mime: \&#34;application/x-7z-compressed\&#34;,\r\n    signature: [0x37, 0x7a, 0xbc, 0xaf, 0x27, 0x1c],\r\n  },\r\n  {\r\n    mime: \&#34;application/wasm\&#34;,\r\n    ext: \&#34;wasm\&#34;,\r\n    signature: [0x00, 0x61, 0x73, 0x6d],\r\n  },\r\n  {\r\n    mime: \&#34;application/x-nintendo-nes-rom\&#34;,\r\n    ext: \&#34;nes\&#34;,\r\n    signature: [0x4e, 0x45, 0x53, 0x1a],\r\n  },\r\n  {\r\n    ext: \&#34;rpm\&#34;,\r\n    mime: \&#34;application/x-rpm\&#34;,\r\n    signature: [0xed, 0xab, 0xee, 0xdb],\r\n  },\r\n  {\r\n    ext: \&#34;zst\&#34;,\r\n    mime: \&#34;application/zstd\&#34;,\r\n    signature: [0x28, 0xb5, 0x2f, 0xfd],\r\n  },\r\n  {\r\n    ext: \&#34;alias\&#34;,\r\n    mime: \&#34;application/x.apple.alias\&#34;,\r\n    signature: [\r\n      0x62, 0x6f, 0x6f, 0x6b, 0x00, 0x00, 0x00, 0x00, 0x6d, 0x61, 0x72, 0x6b,\r\n      0x00, 0x00, 0x00, 0x00,\r\n    ],\r\n  },\r\n  {\r\n    ext: \&#34;deb\&#34;,\r\n    mime: \&#34;application/x-deb\&#34;,\r\n    signature: [0x21, 0x3c, 0x61, 0x72, 0x63, 0x68, 0x3e, 0x0a],\r\n  },\r\n  {\r\n    ext: \&#34;blend\&#34;,\r\n    mime: \&#34;application/x-blender\&#34;,\r\n    signature: [0x42, 0x4c, 0x45, 0x4e, 0x44, 0x45, 0x52],\r\n  },\r\n  {\r\n    ext: \&#34;chm\&#34;,\r\n    mime: \&#34;application/vnd.ms-htmlhelp\&#34;,\r\n    signature: [\r\n      0x49, 0x54, 0x53, 0x46, 0x03, 0x00, 0x00, 0x00, 0x60, 0x00, 0x00, 0x00,\r\n    ],\r\n  },\r\n  {\r\n    ext: \&#34;rtf\&#34;,\r\n    mime: \&#34;application/rtf\&#34;,\r\n    signature: [0x7b, 0x5c, 0x72, 0x74, 0x66, 0x31],\r\n  },\r\n  {\r\n    ext: \&#34;cab\&#34;,\r\n    mime: \&#34;application/vnd.ms-cab-compressed\&#34;,\r\n    signature: [0x4d, 0x53, 0x43, 0x46],\r\n  },\r\n  {\r\n    ext: \&#34;cab\&#34;,\r\n    mime: \&#34;application/vnd.ms-cab-compressed\&#34;,\r\n    signature: [0x49, 0x53, 0x63, 0x28],\r\n  },\r\n  {\r\n    ext: \&#34;crx\&#34;,\r\n    mime: \&#34;application/x-google-chrome-extension\&#34;,\r\n    signature: [0x43, 0x72, 0x32, 0x34],\r\n  },\r\n  {\r\n    ext: \&#34;nes\&#34;,\r\n    mime: \&#34;application/x-nintendo-nes-rom\&#34;,\r\n    signature: [0x4e, 0x45, 0x53, 0x1a],\r\n  },\r\n  {\r\n    ext: \&#34;sqlite\&#34;,\r\n    mime: \&#34;application/x-sqlite3\&#34;,\r\n    signature: [\r\n      0x53, 0x51, 0x4c, 0x69, 0x74, 0x65, 0x20, 0x66, 0x6f, 0x72, 0x6d, 0x61,\r\n      0x74, 0x20, 0x33, 0x00,\r\n    ],\r\n  },\r\n  {\r\n    ext: \&#34;lz\&#34;,\r\n    mime: \&#34;application/x-lzip\&#34;,\r\n    signature: [0x4c, 0x5a, 0x49, 0x50],\r\n  },\r\n  {\r\n    ext: \&#34;pcap\&#34;,\r\n    mime: \&#34;application/vnd.tcpdump.pcap\&#34;,\r\n    signature: [0xd4, 0xc3, 0xb2, 0xa1],\r\n  },\r\n  {\r\n    ext: \&#34;pcap\&#34;,\r\n    mime: \&#34;application/vnd.tcpdump.pcap\&#34;,\r\n    signature: [0xa1, 0xb2, 0xc3, 0xd4],\r\n  },\r\n  {\r\n    mime: \&#34;text/plain\&#34;,\r\n    ext: \&#34;txt\&#34;,\r\n    signature: [0xef, 0xbb, 0xbf],\r\n  },\r\n  {\r\n    mime: \&#34;text/plain\&#34;,\r\n    ext: \&#34;txt\&#34;,\r\n    signature: [0xfe, 0xff],\r\n  },\r\n  {\r\n    mime: \&#34;text/plain\&#34;,\r\n    ext: \&#34;txt\&#34;,\r\n    signature: [0xff, 0xfe],\r\n  },\r\n];\r\n\r\n/**\r\n * @description 校验给出的字节数据是否符合某种MIME Type的signature\r\n * @param {Array} bufferss 字节数据\r\n * @param {Object} typeItem 校验项 { signature, offset  }\r\n */\r\nconst check = (bufferss, { signature, offset = 0 }) =&gt; {\r\n  for (let i = 0, len = signature.length; i &lt; len; i++) {\r\n    // 传入字节数据与文件signature不匹配\r\n    // 需考虑有offset的情况以及signature中有值为undefined的情况\r\n    if (bufferss[i + offset] !== signature[i] &amp;&amp; signature[i] !== undefined)\r\n      return false;\r\n  }\r\n  return true;\r\n};\r\n\r\n/**\r\n * @description 获取文件二进制数据\r\n * @param {File} file 文件对象实例\r\n * @param {Object} options 配置项，指定读取的起止范围\r\n */\r\nconst getArrayBuffer = (file, { start, end }) =&gt; {\r\n  return new Promise((reslove, reject) =&gt; {\r\n    try {\r\n      const reader = new FileReader();\r\n      reader.onload = (e) =&gt; {\r\n        const buffers = new Uint8Array(e.target.result);\r\n        reslove(buffers);\r\n      };\r\n      reader.onerror = (err) =&gt; reject(err);\r\n      reader.onabort = (err) =&gt; reject(err);\r\n      reader.readAsArrayBuffer(file.slice(start, end));\r\n    } catch (err) {\r\n      reject(err);\r\n    }\r\n  });\r\n};\r\n\r\n/**\r\n * @description 获取文件的真实类型\r\n * @param {File} file 文件对象实例\r\n * @param {Object} options 配置项，指定读取的起止范围\r\n */\r\nconst getFileType = (file, options = { start: 0, end: 32 }) =&gt;\r\n  getArrayBuffer(file, options)\r\n    .then((buffers) =&gt; {\r\n      // 找出签名列表中定义好的类型，并返回\r\n      for (let i = 0, len = signatureList.length; i &lt; len; i++) {\r\n        if (check(buffers, signatureList[i])) {\r\n          const { mime, ext } = signatureList[i];\r\n          return { mime, ext };\r\n        }\r\n      }\r\n      // 未找到则返回file对象中的信息\r\n      return { mime: file.type, ext: \&#34;\&#34; };\r\n    })\r\n    .catch((err) =&gt; err);\r\n\r\nconst handleFileChange = (e) =&gt; {\r\n  const file = e.target.files[0];\r\n  getFileType(file)\r\n    .then((res) =&gt; {\r\n      alert(JSON.stringify(res));\r\n    })\r\n    .catch(console.error);\r\n};\r\n\r\nconst input = document.getElementById(\&#34;upload\&#34;);\r\nconst btn = document.getElementById(\&#34;upload_btn\&#34;);\r\nbtn.onclick = () =&gt; {\r\n  input.click();\r\n};\r\ninput.addEventListener(\&#34;change\&#34;, handleFileChange, false);\r\n&#34;,
  &#34;style.css&#34;: &#34;* {\r\n  padding: 0;\r\n  margin: 0;\r\n  box-sizing: border-box;\r\n}\r\n\r\nhtml,\r\nbody {\r\n  height: 100%;\r\n}\r\n\r\nbody {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  background-color: #333;\r\n}\r\n\r\n.upload-label input {\r\n  display: none;\r\n}\r\n\r\n#upload_btn {\r\n  padding: 15px 20px;\r\n  outline: none;\r\n  border: none;\r\n  border-radius: 30px;\r\n  background-color: #fff;\r\n  box-shadow: rgba(0, 0, 0, 0.4) 0px 2px 4px,\r\n    rgba(0, 0, 0, 0.3) 0px 7px 13px -3px, rgba(0, 0, 0, 0.2) 0px -3px 0px inset;\r\n  font-size: 14px;\r\n}\r\n&#34;
}</pre
    >
    <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.34.1/min/vs/loader.js"></script>
    <script src="script.js"></script>
  </body>
</html>
